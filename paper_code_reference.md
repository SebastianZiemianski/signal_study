# Code Reference for Paper (Live Data Generation Only)

This note lists the minimal code references and snippets to include in the paper.
It intentionally excludes backtesting/backfill logic and scheduling details.

## Relevant Files (cite these)

- `run_signals.py` (live data pipeline)
- `prompts/prompt1.txt` to `prompts/prompt4.txt` (prompt templates)
- `generate_all_reports.py` (optional, only if you show aggregated reporting)

Do not cite:
- `backfill_runs.py` (historical/backfill)
- `setup_cron.sh`, `setup_systemd.sh` (scheduling)
- `run_with_env.sh` (environment bootstrap)

## Minimal Live Pipeline (pseudocode)

```text
for each symbol in {EURUSD, AUDJPY}:
  price = fetch_current_market_data(symbol)
  prompt = render_prompt(template, variables(price, time, symbol))
  result = call_model_structured(prompt)
  save_json(result)
generate_html_report(all_results)  # optional
```

## Core Functions (from `run_signals.py`)

Use these functions as the basis for the method description:

```python
fetch_current_market_data(symbol)
render_prompt(template, variables)
call_model_structured(prompt, ...)
save_json(path, result)
```

## Output Schema (what gets saved)

Fields saved per run (JSON):

```text
symbol, timeframe, timestamp_utc, signal, confidence,
entry, stop, targets, rationale, invalidation,
prompt_name, current_price
```

## Example Output (anonymized)

```json
{
  "symbol": "EURUSD",
  "timeframe": "5m",
  "timestamp_utc": "2025-11-20T14:00:00+00:00",
  "signal": "BUY",
  "confidence": 0.62,
  "entry": 1.0698,
  "stop": 1.0685,
  "targets": [1.0712, 1.0720],
  "rationale": "Short-term momentum aligned with trend.",
  "invalidation": "Break below 1.0685.",
  "prompt_name": "prompt1",
  "current_price": 1.0695
}
```

## Suggested Paper Text (1â€“2 sentences)

```text
Live signals are generated by fetching the current market price, rendering a
templated prompt, and calling a structured LLM output function that returns
signal fields which are stored as JSON for analysis.
```
